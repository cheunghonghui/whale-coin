import{u as E}from"./index-kI_rcZ0B.js";import{l as J,c as M,R as O}from"./api-Xp8SCp5f.js";import{r as q,_ as C,f as T,m as B}from"./index-C_CK6dNx.js";import{m as S,a as $,Z as I,ah as i,p as h,q as y,u as p,U as e,O as t,S as n,T as j,t as c,M as W,aA as D,aB as Z}from"./vue-DRvwLzXx.js";const G={key:0,class:"flex items-center space-x-2"},K={key:1,class:"flex items-center space-x-2"},Q={class:"dialog-footer"},X={class:"dialog-footer"},x="70px",H="370px",Y=S({__name:"Login",setup(w){const f=$(!1),a=E(),d=I({name:"",password:"",phone:"",email:""}),V=$(),l=I({name:"",password:"",checkpass:"",email:"",phone:""}),r=I({name:[{required:!0,message:"请输入名字",trigger:"blur"},{min:2,max:15,message:"长度为2到15个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码应不少于六位",trigger:"blur"}],checkpass:[{validator:(u,o,m)=>{o===""?(m(new Error("请再次输入密码")),console.log(u)):o!==l.password?m(new Error("密码不一致!")):m()},trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式错误",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}]}),v=async()=>{const u={name:d.name,password:d.password,phone:d.phone},o=await J(u);o.id>0?(a.id=o.id,a.name=o.username,a.atoken=o.atoken,a.rtoken=o.rtoken,a.logined=!0,a.dialogFormVisible=!1,d.name="",d.password="",q.push("/")):alert("用户名或密码错误,请重新输入")},b=()=>{a.id=0,a.name="",a.atoken="atoken",a.rtoken="rtoken",a.logined=!a.logined,q.push("/")},U=async()=>{const u=/^1[3456789]\d{9}$/;let o;if(u.test(d.phone)){const m={phone:d.phone};o=await M(m)}else return alert("请输入正确的手机号！"),!1;o&&o.code=="200"&&(alert(`已收到您的第${o.times}次重置密码申请，会尽快为您办理！`),a.dialogFormVisible=!1,d.phone="",d.password="")},k=async u=>{u&&await u.validate(o=>{o?F():alert("请完善注册信息!")})},F=async()=>{const u={name:l.name,password:l.password,email:l.email,phone:l.phone};(await O(u)).code==200?(alert("注册成功，请等待至多三天审核！"),l.name="",l.password="",l.checkpass="",l.email="",l.phone="",f.value=!1):alert("注册失败")};return(u,o)=>{const m=i("el-button"),z=i("router-link"),_=i("el-input"),g=i("el-form-item"),R=i("el-form"),A=i("el-dialog");return h(),y("div",null,[!p(a).logined||p(a).name.length==0?(h(),y("span",G,[e(m,{text:"",onClick:o[0]||(o[0]=s=>p(a).dialogFormVisible=!0)},{default:t(()=>[n("登录")]),_:1}),e(m,{text:"",onClick:o[1]||(o[1]=s=>f.value=!0)},{default:t(()=>[n("注册")]),_:1})])):(h(),y("span",K,[e(z,{to:"/user",tag:"el-link",type:"primary"},{default:t(()=>[n(j(p(a).name),1)]),_:1}),e(m,{text:"",onClick:b},{default:t(()=>[n("登出")]),_:1})])),e(A,{modelValue:p(a).dialogFormVisible,"onUpdate:modelValue":o[4]||(o[4]=s=>p(a).dialogFormVisible=s),width:H,center:!0,title:"登录"},{footer:t(()=>[c("span",Q,[e(m,{type:"primary",onClick:v},{default:t(()=>[n("登录")]),_:1}),e(m,{onClick:U},{default:t(()=>[n("忘记密码")]),_:1})])]),default:t(()=>[e(R,{model:d},{default:t(()=>[e(g,{label:"账号","label-width":x},{default:t(()=>[e(_,{modelValue:d.name,"onUpdate:modelValue":o[2]||(o[2]=s=>d.name=s),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(g,{label:"密码","label-width":x},{default:t(()=>[e(_,{type:"password",modelValue:d.password,"onUpdate:modelValue":o[3]||(o[3]=s=>d.password=s),autocomplete:"off","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(A,{modelValue:f.value,"onUpdate:modelValue":o[11]||(o[11]=s=>f.value=s),width:H,center:!0,title:"注册"},{footer:t(()=>[c("span",X,[e(m,{type:"primary",onClick:o[10]||(o[10]=s=>k(V.value))},{default:t(()=>[n("注册")]),_:1})])]),default:t(()=>[e(R,{model:l,ref_key:"ruleFormRef",ref:V,rules:r,"status-icon":""},{default:t(()=>[e(g,{label:"用户名",prop:"name","label-width":x},{default:t(()=>[e(_,{modelValue:l.name,"onUpdate:modelValue":o[5]||(o[5]=s=>l.name=s),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(g,{label:"密码",prop:"password","label-width":x},{default:t(()=>[e(_,{modelValue:l.password,"onUpdate:modelValue":o[6]||(o[6]=s=>l.password=s),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(g,{label:"确认密码",prop:"checkpass","label-width":x},{default:t(()=>[e(_,{modelValue:l.checkpass,"onUpdate:modelValue":o[7]||(o[7]=s=>l.checkpass=s),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(g,{label:"邮箱",prop:"email","label-width":x},{default:t(()=>[e(_,{modelValue:l.email,"onUpdate:modelValue":o[8]||(o[8]=s=>l.email=s),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(g,{label:"手机号",prop:"phone","label-width":x},{default:t(()=>[e(_,{modelValue:l.phone,"onUpdate:modelValue":o[9]||(o[9]=s=>l.phone=s),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),N=C(Y,[["__scopeId","data-v-5b81c7df"]]),P=w=>(D("data-v-4f7d0e41"),w=w(),Z(),w),ee={class:"flex justify-between items-center"},te=P(()=>c("a",{href:"/",class:"flex items-center"},[c("h2",{class:"text-2xl font-bold text-sky-600"},"鲸币")],-1)),oe={class:"md:hidden flex items-center"},le=P(()=>c("span",null,"编程语言",-1)),ae=P(()=>c("span",null,"框架",-1)),se=S({__name:"Header",setup(w){const f=$("1"),a=$(!1),d=(V,l)=>{console.log(V,l),V!=="Login"&&(a.value=!1)};return(V,l)=>{const L=i("router-link"),r=i("el-menu-item"),v=i("el-menu"),b=i("el-icon"),U=i("el-header"),k=i("el-sub-menu"),F=i("el-drawer"),u=i("el-container");return h(),W(u,null,{default:t(()=>[e(U,null,{default:t(()=>[c("div",ee,[te,e(v,{"default-active":f.value,class:"flex items-center space-x-4",mode:"horizontal",onSelect:d,ellipsis:!1},{default:t(()=>[e(r,{index:"1"},{default:t(()=>[e(L,{to:"/"},{default:t(()=>[n("首页")]),_:1})]),_:1}),e(r,{index:"2"},{default:t(()=>[n("课程")]),_:1}),e(r,{index:"3"},{default:t(()=>[n("资源")]),_:1}),e(r,{index:"4"},{default:t(()=>[e(N)]),_:1})]),_:1},8,["default-active"]),c("div",oe,[e(b,{class:"menu-icon",onClick:l[0]||(l[0]=o=>a.value=!0)},{default:t(()=>[e(p(T))]),_:1})])])]),_:1}),e(F,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=o=>a.value=o),direction:"rtl",size:"80%"},{default:t(()=>[e(v,{"default-active":f.value,onSelect:d},{default:t(()=>[e(r,{index:"1"},{default:t(()=>[n("首页")]),_:1}),e(r,{index:"2"},{default:t(()=>[n("课程")]),_:1}),e(r,{index:"3"},{default:t(()=>[n("资源")]),_:1}),e(r,{index:"Login"},{default:t(()=>[e(N)]),_:1}),e(k,{index:"5"},{title:t(()=>[e(b,null,{default:t(()=>[e(p(B))]),_:1}),le]),default:t(()=>[e(r,{index:"5-1"},{default:t(()=>[n("JavaScript")]),_:1}),e(r,{index:"5-2"},{default:t(()=>[n("Python")]),_:1}),e(r,{index:"5-3"},{default:t(()=>[n("Java")]),_:1})]),_:1}),e(k,{index:"6"},{title:t(()=>[e(b,null,{default:t(()=>[e(p(B))]),_:1}),ae]),default:t(()=>[e(r,{index:"6-1"},{default:t(()=>[n("Vue.js")]),_:1}),e(r,{index:"6-2"},{default:t(()=>[n("React")]),_:1}),e(r,{index:"6-3"},{default:t(()=>[n("Angular")]),_:1})]),_:1})]),_:1},8,["default-active"])]),_:1},8,["modelValue"])]),_:1})}}}),fe=C(se,[["__scopeId","data-v-4f7d0e41"]]),ne={class:"centered-text"},de={class:"api-url"},re=S({__name:"Footer",setup(w){const f="http://christarter.com:8008";return(a,d)=>(h(),y("div",ne,[n(" 鲸币 @ 20242024 "),c("div",de,"API URL: "+j(p(f)),1)]))}}),ce=C(re,[["__scopeId","data-v-1a6b928b"]]);export{ce as F,fe as H};
