import{e as R,g as U}from"./api-B2IVDk6a.js";import{E as T}from"./index-Bg3u_l3A.js";import{m as B,Z as b,d as E,a as c,ah as r,p as N,q as A,t as V,U as t,O as a,S as g,u as h}from"./vue-DRvwLzXx.js";import"./base-BDaasHXh.js";import"./index-kI_rcZ0B.js";import"./crypto-BjADBdty.js";const D={class:"dialog-footer"},_="70px",I="370px",Z=B({__name:"Consume",setup(P){document.title="鲸币消费";let m=b([]);E(async()=>{let o=await R();m.push(...o)});const u=c(!1),e=b({name:"",product:"",price:0}),s=c(),w=c(),C=o=>{s.value=o},v=()=>{u.value=!0},y=async()=>{let o=await U({user_id:2,content:e.product,amount:e.price});if(o.code==200){let l={id:o.consume_id,user_name:e.name,user_id:0,content:e.product,amount:e.price,balance:o.balance,record_time:new Date};m.splice(0,0,l),u.value=!1,s.value.balance=o.balance,s.value.id=o.consume_id,e.name="",e.product="",e.price=0}};return(o,l)=>{const f=r("el-button"),d=r("el-table-column"),i=r("el-input"),p=r("el-form-item"),x=r("el-form"),k=r("el-dialog");return N(),A("div",null,[V("div",null,[t(f,{type:"primary",onClick:v},{default:a(()=>[g("新增")]),_:1})]),t(h(T),{ref_key:"singleTableRef",ref:w,data:h(m),stripe:"","highlight-current-row":"",style:{width:"100%"},onCurrentChange:C},{default:a(()=>[t(d,{prop:"user_name",label:"名字",width:"80"}),t(d,{prop:"content",label:"消费事项"}),t(d,{prop:"amount",label:"消费金额"}),t(d,{prop:"record_time",label:"消费时间"})]),_:1},8,["data"]),t(k,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=n=>u.value=n),width:I,center:!0,title:"鲸币消费"},{footer:a(()=>[V("span",D,[t(f,{type:"primary",onClick:y},{default:a(()=>[g("确定")]),_:1})])]),default:a(()=>[t(x,{model:e},{default:a(()=>[t(p,{label:"名字","label-width":_},{default:a(()=>[t(i,{modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=n=>e.name=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(p,{label:"商品","label-width":_},{default:a(()=>[t(i,{modelValue:e.product,"onUpdate:modelValue":l[1]||(l[1]=n=>e.product=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(p,{label:"价格","label-width":_},{default:a(()=>[t(i,{modelValue:e.price,"onUpdate:modelValue":l[2]||(l[2]=n=>e.price=n),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});export{Z as default};
